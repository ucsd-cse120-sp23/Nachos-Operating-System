#include "stdio.h"
#include "stdlib.h"
#include <fcntl.h>
#include <string.h>
#include <errno.h>

int main() {
    int fd[20];  // file descriptors
    int i;
    char filename[10];

    // Test 1: Open an existing file
    fd[0] = open("existing_file.txt");
    if(fd[0] < 0) {
        printf("Test 1 failed: %s\n", strerror(errno));
    } else {
        printf("Test 1 passed\n");
    }

    // Test 2: Attempt to open a non-existent file
    fd[1] = open("non_existent_file.txt");
    if(fd[1] < 0) {
        printf("Test 2 passed\n");
    } else {
        printf("Test 2 failed\n");
        close(fd[1]);
    }

    // Test 3: Open the same file multiple times
    fd[1] = open("existing_file.txt");
    fd[2] = open("existing_file.txt");
    if(fd[1] < 0 || fd[2] < 0 || fd[1] == fd[2]) {
        printf("Test 3 failed: %s\n", strerror(errno));
    } else {
        printf("Test 3 passed\n");
    }

    // Test 4: Open more than the maximum number of files allowed per process
    for(i = 0; i < 20; i++) {
        sprintf(filename, "file%d.txt", i);
        fd[i] = open(filename);
        if(fd[i] < 0) {
            if(i < 16) {
                printf("Test 4 failed: %s\n", strerror(errno));
                break;
            } else {
                printf("Test 4 passed\n");
                break;
            }
        }
    }

    // Close all opened file descriptors
    for(i = 0; i < 20; i++) {
        if(fd[i] >= 0) {
            close(fd[i]);
        }
    }

    return 0;
}